<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>InterWorks - Tableau Software &#38; Business Intelligence Consulting &#187; Joe Mako</title>
	<atom:link href="http://interworks.co.uk/author/joe-mako/feed/" rel="self" type="application/rss+xml" />
	<link>http://interworks.co.uk/</link>
	<description>InterWorks - Tableau Software &#38; Business Intelligence Consulting</description>
	<lastBuildDate>Fri, 26 Jun 2015 08:09:24 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	
	<item>
		<title>Groundwork for Custom Table Calculations</title>
		<link>http://interworks.co.uk/blog/groundwork-for-custom-table-calculations/</link>
		<comments>http://interworks.co.uk/blog/groundwork-for-custom-table-calculations/#comments</comments>
		<pubDate>Mon, 21 Nov 2011 02:00:06 +0000</pubDate>
		<dc:creator><![CDATA[Joe Mako]]></dc:creator>
				<category><![CDATA[Blog]]></category>
		<category><![CDATA[Joe Mako]]></category>
		<category><![CDATA[Table Calculation]]></category>
		<category><![CDATA[Tableau]]></category>

		<guid isPermaLink="false">http://www.interworks.co.uk/?p=2846</guid>
		<description><![CDATA[<p>Custom Table Calculations is one of the most advanced concepts in Tableau. The main resources Tableau provides can be found at On-Demand Training &#8211; Table Calculations (requires sign in) and Top 10 Tableau Table Calculations where you can find a variety of examples and a white paper with additional details. The capability of custom table calculations goes beyond the information provided in [&#8230;]</p>
<p>The post <a rel="nofollow" href="http://interworks.co.uk/blog/groundwork-for-custom-table-calculations/">Groundwork for Custom Table Calculations</a> appeared first on <a rel="nofollow" href="http://interworks.co.uk/">InterWorks - Tableau Software &amp; Business Intelligence Consulting</a>.</p>
<img src="http://track.hubspot.com/__ptq.gif?a=502772&k=14&bu=http%3A%2F%2Finterworks.co.uk%2Fblog%2F&r=http%3A%2F%2Finterworks.co.uk%2Fblog%2Fgroundwork-for-custom-table-calculations%2F&bvt=rss&p=wordpress" style="float:left;" xml:base="http://interworks.co.uk/feed/" width="1" height="1" border="0" align="right"/>]]></description>
				<content:encoded><![CDATA[<p>Custom Table Calculations is one of the most advanced concepts in Tableau. The main resources Tableau provides can be found at <a title="On-Demand Training - Table Calculations" href="http://www.tableau.com/learn/tutorials/on-demand/intro-table-calculations" target="_blank">On-Demand Training &#8211; Table Calculations</a> (requires sign in) and <a title="Top 10 Tableau Table Calculations" href="http://www.tableausoftware.com/table-calculations">Top 10 Tableau Table Calculations</a> where you can find a variety of examples and a <a title="white paper on Table Calculations" href="http://www.tableausoftware.com/sites/default/files/pages/table_calcs_in_tableau_6.pdf">white paper</a> with additional details. The capability of custom table calculations goes beyond the information provided in those resources, and there are many factors not covered in them that impact the evaluation of table calculations. They also have limitations, and can have better or worse performance depending on how they are written. This will be a series of posts covering concepts that will remove the guesswork and enable you to employ table calculations so you can create amazing visualizations and dynamic interactive views that apply the business logic and calculations you want.</p>
<p>This post will cover the difference between kinds of pills (discrete vs. continuous and dimension vs. aggregate), a worksheet layout to assist in troubleshooting your formulas, the TOTAL() function, and a basic Compute using setting. Future posts will cover topics including sorting multiple levels of dimensions (with and without a Set), including Advanced Compute using with Restarting every and at the level, the effects of a cross-tab, filtering order of operations, performance, nesting, offset, each of the table calculation functions (and their specific options in the Edit Table Calculation dialog and context menu), and maybe some other related topics as well (like data blending, custom SQL and pass-through functions). I hope to make this good resource by sharing the understanding that I have gained from trial and error, conversations with other Tableau experts and learning from their work, and experience from the Tableau Forums. If you have specific questions about how to get a result that you are looking for, I recommend starting a new thread on the Tableau forum and provide at least a sample data set.</p>
<p><strong>Kinds of pills</strong></p>
<p><a title="Tom Brown's Google+" href="https://plus.google.com/108296725383510328518">Tom Brown</a> of <a title="The Information Lab" href="http://theinformationlab.co.uk/">The Information Lab</a>, wrote a great post on <a title="Blue things and Green things" href="http://theinformationlab.co.uk/blog/2011/9/23/blue-things-and-green-things.html">&#8220;Blue things and Green things&#8221;</a>. This is an important distinction to be aware of, and the effects that Tom discusses in nice detail. I would like to build on Tom&#8217;s work, and discuss finer distinctions: Discrete vs. Continuous and Dimension vs. Aggregate.</p>
<p>Discrete pills are Blue and Continuous pills are Green. This distinction visibly affects the display of the data and some dialog boxes.</p>
<p style="padding-left: 30px;">- On the Rows and Columns shelves, Discrete Blue pills make Cells and Panes, and Continuous Green pills make an Axis.</p>
<p style="padding-left: 30px;">- On the color shelf, Discrete Blue pills provide a categorical color palette picker and legend, and Continuous Green pills provide a gradient color palette picker and legend.</p>
<p style="padding-left: 30px;">- On the filter shelf Discrete Blue pills provide a multi-select keep/exclude and conditional filter options, and Continuous Green pills provide range based filter options.</p>
<p>There are a variety of other situations where the pill being pill being Discrete or Continuous has an effect.</p>
<p>Dimension vs. Aggregate pills provide visual clues in the text displayed in the pill, as seen in this image:</p>
<p><a href="http://www.interworks.co.uk/wp-content/uploads/2011/11/ContinuousDiscrete_DimensionAggregate.png"><img class="aligncenter size-full wp-image-2900" title="Continuous v.s. Discrete and Dimension v.s. Aggregate" src="http://www.interworks.co.uk/wp-content/uploads/2011/11/ContinuousDiscrete_DimensionAggregate.png" alt="Continuous v.s. Discrete and Dimension v.s. Aggregate" width="525" height="169" /></a></p>
<p>Commonly pills are Discrete Dimensions and Continuous Aggregates, but you can also have Discrete Aggregate and Continuous Dimension pills.</p>
<p>The combination of Dimension pills (non-aggregated Green or Blue pills) on the Rows, Columns and Marks cards defines what creates a mark in the view. Each distinct combination of values in these Dimension pills creates a mark in a pane. Dimension pills are the fields in the GROUP BY clause of the query sent to the data source.</p>
<p>Being aware of these Discrete vs. Continuous and Dimension vs. Aggregate distinctions is very important for understanding Table Calculations and other useful capabilities of Tableau.</p>
<p><strong>The Custom Table Calculation TOTAL()</strong></p>
<p>I have decided to start with the TOTAL() function because it is very similar to the Subtotals and Grand Totals. Also, if you have ever used the Quick Table Calculation &#8220;Percent of Total&#8221;, you have used the TOTAL() function.</p>
<p>Let&#8217;s start with the &#8220;Sample &#8211; Coffee Chain (Access)&#8221; data source that comes with Tableau, and place the fields &#8220;Market&#8221; and &#8220;Product&#8221; on the Rows shelf. Both these pills default to being Discrete Dimension pills (non-aggregated Blue pills). With Market on the left and Product on the right side, each distinct value in Market is creating a Pane, and each distinct combination of Market and Product is creating a Cell. Next, place the field &#8220;Sales&#8221; on the Text shelf that is on the Marks card. We now have the Sum of Sales for each distinct combination of Market and Product. We have just one mark per cell because we do not have any Dimension pills on the Marks card.</p>
<p>Since we have a Dimension pill on the Rows shelf, Market, that is creating panes, we can bring up that pill&#8217;s right-click context menu, and turn on Subtotals. You cannot turn on Subtotals for the right-most discrete pill. Additionally to be able to turn on Subtotals, the pill and all pills to the left need to be discrete dimensions, you can have discrete aggregates creating cells (this can happen when you have a dimension on the Marks card).</p>
<p><a href="http://www.interworks.co.uk/wp-content/uploads/2011/11/TurningOnSubtotals.png"><img class="aligncenter size-full wp-image-2901" title="Turning On Subtotals" src="http://www.interworks.co.uk/wp-content/uploads/2011/11/TurningOnSubtotals.png" alt="Turning On Subtotals" width="544" height="355" /></a></p>
<p>Next, from the main menu select, Table-&gt;Column Grand Totals. You can turn on Column Grand Totals as long as you do not have any Discrete Aggregation pills on the Columns shelf.</p>
<p>Now we can see each Product&#8217;s Sales within each Market, the Total Sales for all Products within each Market, and the Total Sales for all combinations of Product and Market.</p>
<p>To get a Percent of Total, bring up the right-click context menu for the pill SUM(Sales) on the Text Shelf, and select Quick Table Calculation-&gt;Percent of Total</p>
<p><a href="http://www.interworks.co.uk/wp-content/uploads/2011/11/SettingPercentOfTotal.png"><img class="aligncenter size-full wp-image-2903" title="Setting Percent of Total" src="http://www.interworks.co.uk/wp-content/uploads/2011/11/SettingPercentOfTotal.png" alt="Setting Percent of Total" width="436" height="345" /></a></p>
<p>Let&#8217;s investigate this formula we just created by again bringing up the right-click context menu for the pill SUM(Sales) on the Text Shelf, notice that it now has a triangle-delta symbol to note that it is a table calculation, and selecting Edit Table Calculation, and clicking the Customize button (we will come back to this dialog in more detail in another post), to get this formula:</p>
<p><a href="http://www.interworks.co.uk/wp-content/uploads/2011/11/PercentOfTotalFormula.png"><img class="aligncenter size-full wp-image-2906" title="Percent of Total Formula" src="http://www.interworks.co.uk/wp-content/uploads/2011/11/PercentOfTotalFormula.png" alt="Percent of Total Formula" width="360" height="120" /></a></p>
<p>We can break this formula down to a numerator: SUM([Sales]) and denominator: TOTAL(SUM([Sales])). Let bring those out as two separate pills. First, create a calculated field for the denominator:</p>
<p><a href="http://www.interworks.co.uk/wp-content/uploads/2011/11/TotalSumOfSales.png"><img class="aligncenter size-full wp-image-2907" title="Total Sum of Sales" src="http://www.interworks.co.uk/wp-content/uploads/2011/11/TotalSumOfSales.png" alt="Total Sum of Sales" width="360" height="120" /></a></p>
<p>and drop it onto the view using the &#8220;Show Me&#8221; drop feature that turns on the Measure Names/Values pills.</p>
<p><a href="http://www.interworks.co.uk/wp-content/uploads/2011/11/ShowMeDrop.png"><img class="aligncenter size-full wp-image-2909" title="Show Me Drop" src="http://www.interworks.co.uk/wp-content/uploads/2011/11/ShowMeDrop.png" alt="Show Me Drop" width="277" height="275" /></a></p>
<p>Then place the field &#8220;Sales&#8221; on the Measure Values shelf as well, and arrange as shown:</p>
<p><a href="http://www.interworks.co.uk/wp-content/uploads/2011/11/MeasureValuesShelf.png"><img class="aligncenter size-full wp-image-2910" title="Measure Values Shelf" src="http://www.interworks.co.uk/wp-content/uploads/2011/11/MeasureValuesShelf.png" alt="Measure Values Shelf" width="162" height="113" /></a></p>
<p>This is the worksheet layout that I prefer, Dimension pills on the Rows shelf, Measure Names on the Columns, Measure Values on the Text, and all the aggregations and table calculations on the Measure Values shelf. The result is my preferred worksheet layout for building and troubleshooting table calculations:</p>
<p><a href="http://www.interworks.co.uk/wp-content/uploads/2011/11/SetupView.png"><img class="aligncenter size-full wp-image-2912" title="Setup View" src="http://www.interworks.co.uk/wp-content/uploads/2011/11/SetupView.png" alt="Setup View" width="550" height="475" /></a></p>
<p>With this view, we can see the numerator and denominator for each cell, and see that TOTAL(SUM([Sales])) is the same value as the Grand Total (all the way at the bottom). This is because the compute using is currently set to &#8220;Table (Down)&#8221;, so it is the sum of Sales for all combinations of Market and Product. In order to get the value for the pill Total Sum of Sales to match each Market&#8217;s Subtotal, we need to set the Compute using for the pill. From Total Sum of Sales&#8217; right-click context menu, select Compute using-&gt;Product. Perform the same setting change for the table calculation pill SUM(Sales) as well to get all the numbers to match up.</p>
<p><a href="http://www.interworks.co.uk/wp-content/uploads/2011/11/ComputeUsingProduct.png"><img class="aligncenter size-full wp-image-2914" title="Compute Using Product" src="http://www.interworks.co.uk/wp-content/uploads/2011/11/ComputeUsingProduct.png" alt="Compute Using Product" width="530" height="254" /></a></p>
<p>When we set the Compute using to Product, we are telling it to use Product for addressing, and all other dimension pills for partitioning. In this exact situation with the TOTAL() function and worksheet layout, I would say: We are calculating the total sum of Sales for each Market regardless of each Product, and then making that value available to each Market-Product combination. There are a variety of other ways to phrase this so that it makes sense to you. The gist of the TOTAL() function is it makes a Subtotal or Grand Total value available to all dimension combinations based on the Compute using settings.</p>
<p>That wraps up this post covering the different kinds of pills (discrete vs. continuous and dimension vs. aggregate), a worksheet layout that I prefer for crafting calculations, the TOTAL() function, and a simple Compute using setting. You are welcome to post your questions the topics I have covered here, and I will cover more table calculation content in upcoming posts.</p>
<p>&nbsp;</p>
<p>The post <a rel="nofollow" href="http://interworks.co.uk/blog/groundwork-for-custom-table-calculations/">Groundwork for Custom Table Calculations</a> appeared first on <a rel="nofollow" href="http://interworks.co.uk/">InterWorks - Tableau Software &amp; Business Intelligence Consulting</a>.</p>
<img src="http://track.hubspot.com/__ptq.gif?a=502772&k=14&bu=http%3A%2F%2Finterworks.co.uk%2Fblog%2F&r=http%3A%2F%2Finterworks.co.uk%2Fblog%2Fgroundwork-for-custom-table-calculations%2F&bvt=rss&p=wordpress" style="float:left;" xml:base="http://interworks.co.uk/feed/" width="1" height="1" border="0" align="right"/>]]></content:encoded>
			<wfw:commentRss>http://interworks.co.uk/blog/groundwork-for-custom-table-calculations/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
	</channel>
</rss>
